<ion-view title="Pronto">
  <ion-content class="has-header has-padding">
    <ion-list>
        <div class="center" ng-hide = "hideRequest">
          <div class = 'rest-name'>Request Summary</div>
          <div class = 'rest-address'>
            {{response.radius}} miles from {{response.address}}
          </div>
          <div class = 'rest-address'>
            Group of {{response.groupSize}} in {{response.mins}} mins
          </div>
        </div>
        <div class="center" ng-hide = "!hideRequest">
          <div class>Please Submit A Request</div>
        </div>
    </ion-list>
  <div class="item item-divider rest-name">
    New Offers
  </div>
  <ion-refresher
    pulling-text="Pull to refresh..."
    on-refresh="updateData()"
    refreshing-text="Refreshing!"
    refreshing-icon="ion-loading-c">
  </ion-refresher>

  <div class="list card" ng-repeat="offer in offers | filter: {status: filterOn} | orderBy:'updatedAt'" ng-hide = "filterOn === 'Accepted'">
    <div class="item item-body">
      <div class = 'rest-name'>{{offer.businessName}} </div>
      <span ng-class= "calculateStars(offer.yelpStars)"></span>
      <div >reviews: {{offer.yelpReviews}}</div>
      <div class = 'rest-address'>{{offer.address}} ({{offer.distance | number:2}} mi away)</div>
      <div class = 'rest-offer'>Offer: {{offer.replies}}</div>
      <div class = 'rest-offer'>Expire<span am-time-ago="offer.expirationDateTime"></span></div>
    </div>
    <div class="item tabs tabs-secondary tabs-icon-left">
      <a class="tab-item" ng-click="accept(offer.businessId)">
        <i class="icon ion-ios7-checkmark-outline"></i>
        Accept
      </a>
      <a class="tab-item" ng-click="go(offer.yelpUrl)">
        <!-- <i class="icon ion-social-hackernews-outline"></i> -->
        <img src="img/yelp-icon.png">
        Yelp
      </a>
      <a class="tab-item" ng-click="reject(offer.businessId)">
        <i class="icon ion-ios7-close-outline"></i>
        Decline
      </a>
    </div>
  </div>


  <div class="list card" ng-repeat="offer in offers | filter: {status: filterOn} | orderBy:'updatedAt'" ng-hide = "filterOn === 'Offered'">
    <div class="item item-body">
      <div class = 'rest-name'>Accepted</div>
      <div class = 'rest-name'>{{offer.businessName}} </div>
      <span ng-class= "calculateStars(offer.yelpStars)"></span>
      <div >reviews: {{offer.yelpReviews}}</div>
      <div class = 'rest-address'>{{offer.address}} ({{offer.distance | number:2}} mi away)</div>
      <div class = 'rest-offer'>Offer: {{offer.replies}}</div>
    </div>
    <div class="item tabs tabs-secondary tabs-icon-left">
      <a class="tab-item" ng-click="go(offer.yelpUrl)">
        <i class="icon ion-social-hackernews-outline"></i>
        Yelp
      </a>
    </div>
  </div>

  </ion-content>
</ion-view>
